<!--
    //*********************************************************
    //
    // Copyright (c) Microsoft. All rights reserved.
    // THIS CODE IS PROVIDED *AS IS* WITHOUT WARRANTY OF
    // ANY KIND, EITHER EXPRESS OR IMPLIED, INCLUDING ANY
    // IMPLIED WARRANTIES OF FITNESS FOR A PARTICULAR
    // PURPOSE, MERCHANTABILITY, OR NON-INFRINGEMENT.
    //
    //*********************************************************
-->
<local:ItemsPageBase
    x:Class="ModernWpf.SampleApp.ControlPages.ListView2Page"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:cm="clr-namespace:System.ComponentModel;assembly=WindowsBase"
    xmlns:data="clr-namespace:ModernWpf.SampleApp.Data"
    xmlns:local="clr-namespace:ModernWpf.SampleApp"
    xmlns:local1="clr-namespace:ModernWpf.SampleApp.ControlPages"
    xmlns:sys="clr-namespace:System;assembly=mscorlib"
    xmlns:ui="http://schemas.modernwpf.com/2019">
    <Page.Resources>
        <local1:ContactGroupKeyConverter x:Key="ContactGroupKeyConverter" />

        <!--
            Use a collection view source for content that presents itself as a list of items that can be grouped or sorted.  Otherwise, you can use x:Bind
            directly on the ListView's item source to for further optimization. Please see the AppUIBasics sample for an example of how to do this.
        -->
        <CollectionViewSource x:Key="ContactsCVS">
            <CollectionViewSource.GroupDescriptions>
                <PropertyGroupDescription Converter="{StaticResource ContactGroupKeyConverter}" PropertyName="LastName" />
            </CollectionViewSource.GroupDescriptions>
            <CollectionViewSource.SortDescriptions>
                <cm:SortDescription PropertyName="LastName" />
            </CollectionViewSource.SortDescriptions>
        </CollectionViewSource>

        <!--  When using x:Bind, you need to set x:DataType  -->
        <DataTemplate x:Key="ContactListViewTemplate">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Ellipse
                    x:Name="Ellipse"
                    Grid.RowSpan="2"
                    Width="32"
                    Height="32"
                    Margin="6"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Fill="{DynamicResource SystemControlBackgroundBaseMediumBrush}" />
                <TextBlock
                    Grid.Column="1"
                    Margin="12,6,0,0"
                    Style="{DynamicResource BaseTextBlockStyle}"
                    Text="{Binding Name, Mode=OneTime}" />
                <TextBlock
                    Grid.Row="1"
                    Grid.Column="1"
                    Margin="12,0,0,6"
                    Style="{DynamicResource BodyTextBlockStyle}"
                    Text="{Binding Company, Mode=OneTime}" />
            </Grid>
        </DataTemplate>

        <DataTemplate x:Key="BasicListViewTemplate">
            <TextBlock Margin="0,5,0,5" Text="{Binding Name, Mode=OneTime}" />
        </DataTemplate>
    </Page.Resources>
    <ui:SimpleStackPanel>

        <local:ControlExample HeaderText="Basic ListView with Simple DataTemplate">
            <StackPanel>
                <TextBlock Margin="0,0,0,15">
                    This is a basic ListView that has the full source code below.<LineBreak />
                    Other samples on this page display only the additional markup needed to customize a simple ListView like this one.</TextBlock>
                <ui:ListView
                    x:Name="BaseExample"
                    Width="350"
                    Height="400"
                    HorizontalAlignment="Left"
                    BorderBrush="{DynamicResource SystemControlForegroundBaseMediumLowBrush}"
                    BorderThickness="1"
                    ItemTemplate="{StaticResource BasicListViewTemplate}" />
            </StackPanel>
        </local:ControlExample>

        <local:ControlExample HeaderText="ListView with Selection Support">
            <StackPanel>
                <RichTextBox Margin="0,0,0,15" Style="{StaticResource RichTextBlockStyle}">
                    <local1:NoPaddingFlowDocument>
                        <Paragraph>You can enable four different selection modes on the right.</Paragraph>
                        <Paragraph>
                            <Bold>None</Bold>
                            disables selection all together.</Paragraph>
                        <Paragraph>
                            <Bold>Single</Bold>
                            allows for only one item to be selected in the list.</Paragraph>
                        <Paragraph>
                            <Bold>Multiple</Bold>
                            causes checkboxes to appear next to items, so that multiple items can be chosen from the list.</Paragraph>
                        <Paragraph>
                            <Bold>Extended</Bold>
                            allows the user to select multiple items by using Ctrl+Click to select the indvidual items they want, or Shift+Click to select a range of contiguous items.</Paragraph>
                    </local1:NoPaddingFlowDocument>
                </RichTextBox>
                <ui:ListView
                    x:Name="Control2"
                    Width="400"
                    Height="400"
                    HorizontalAlignment="Left"
                    BorderBrush="{DynamicResource SystemControlForegroundBaseMediumLowBrush}"
                    BorderThickness="1"
                    ItemTemplate="{StaticResource ContactListViewTemplate}" />
            </StackPanel>
            <local:ControlExample.Options>
                <StackPanel>
                    <ComboBox
                        Margin="0,12,0,0"
                        ui:ControlHelper.Header="SelectionMode"
                        SelectedIndex="1"
                        SelectionChanged="SelectionModeComboBox_SelectionChanged">
                        <sys:String>None</sys:String>
                        <sys:String>Single</sys:String>
                        <sys:String>Multiple</sys:String>
                        <sys:String>Extended</sys:String>
                    </ComboBox>
                </StackPanel>
            </local:ControlExample.Options>
        </local:ControlExample>

        <local:ControlExample HeaderText="ListView with Grouped Headers">
            <StackPanel>
                <ui:ListView
                    x:Name="GroupedListViewCtrl"
                    Width="400"
                    Height="400"
                    HorizontalAlignment="Left"
                    BorderBrush="{DynamicResource SystemControlForegroundBaseMediumLowBrush}"
                    BorderThickness="1"
                    ItemTemplate="{StaticResource ContactListViewTemplate}"
                    ItemsSource="{Binding Source={StaticResource ContactsCVS}}"
                    SelectionMode="Single"
                    VirtualizingPanel.IsVirtualizingWhenGrouping="True"
                    VirtualizingPanel.VirtualizationMode="Recycling">
                    <ui:ListView.GroupStyle>
                        <GroupStyle>
                            <GroupStyle.HeaderTemplate>
                                <DataTemplate>
                                    <Border AutomationProperties.Name="{Binding Name, Mode=OneTime}">
                                        <TextBlock Style="{DynamicResource TitleTextBlockStyle}" Text="{Binding Name, Mode=OneTime}" />
                                    </Border>
                                </DataTemplate>
                            </GroupStyle.HeaderTemplate>
                        </GroupStyle>
                    </ui:ListView.GroupStyle>
                </ui:ListView>
            </StackPanel>
        </local:ControlExample>

        <local:ControlExample HeaderText="ListView with filtering">
            <ui:ListView
                x:Name="FilteredListView"
                Width="400"
                Height="400"
                BorderBrush="{DynamicResource SystemControlForegroundBaseMediumLowBrush}"
                BorderThickness="1"
                ItemTemplate="{StaticResource ContactListViewTemplate}"
                SelectionMode="Single" />

            <local:ControlExample.Options>
                <StackPanel Width="200">
                    <TextBlock Margin="8,8,8,4" Style="{DynamicResource BaseTextBlockStyle}">
                        Filter by...
                    </TextBlock>
                    <TextBox
                        x:Name="FilterByFirstName"
                        Margin="8"
                        HorizontalAlignment="Stretch"
                        ui:ControlHelper.Header="First name"
                        TextChanged="OnFilterChanged" />
                    <TextBox
                        x:Name="FilterByLastName"
                        Margin="8"
                        HorizontalAlignment="Stretch"
                        ui:ControlHelper.Header="Last name"
                        TextChanged="OnFilterChanged" />
                    <TextBox
                        x:Name="FilterByCompany"
                        Margin="8"
                        HorizontalAlignment="Stretch"
                        ui:ControlHelper.Header="Company"
                        TextChanged="OnFilterChanged" />
                </StackPanel>
            </local:ControlExample.Options>

        </local:ControlExample>

        <local:ControlExample HeaderText="ListView with Images">
            <ui:ListView
                x:Name="Control4"
                Height="400"
                MinWidth="550"
                AllowDrop="True"
                BorderBrush="{DynamicResource SystemControlForegroundBaseMediumLowBrush}"
                BorderThickness="1"
                VirtualizingPanel.ScrollUnit="Pixel">
                <ui:ListView.ItemTemplate>
                    <DataTemplate>
                        <Grid Margin="0,12,0,12" AutomationProperties.Name="{Binding Title, Mode=OneTime}">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" MinWidth="150" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Image
                                MaxHeight="100"
                                Source="{Binding ImageLocation, Mode=OneTime}"
                                Stretch="Fill" />

                            <StackPanel Grid.Column="1" Margin="12,0,0,0">
                                <TextBlock
                                    Margin="0,0,0,6"
                                    HorizontalAlignment="Left"
                                    FontSize="14"
                                    FontWeight="SemiBold"
                                    LineHeight="20"
                                    Style="{DynamicResource BaseTextBlockStyle}"
                                    Text="{Binding Title, Mode=OneTime}" />
                                <TextBlock
                                    Width="350"
                                    FontFamily="Segoe UI"
                                    FontWeight="Normal"
                                    Style="{DynamicResource BodyTextBlockStyle}"
                                    Text="{Binding Description, Mode=OneTime}"
                                    TextTrimming="CharacterEllipsis"
                                    TextWrapping="NoWrap" />
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock
                                        Margin="0"
                                        Style="{DynamicResource CaptionTextBlockStyle}"
                                        Text="{Binding Views, Mode=OneTime}" />
                                    <TextBlock Style="{DynamicResource CaptionTextBlockStyle}" Text=" Views " />
                                    <TextBlock
                                        FontFamily="Segoe UI"
                                        FontSize="12"
                                        FontWeight="Bold"
                                        Text=" &#x22C5; " />
                                    <TextBlock
                                        Margin="5,0,0,0"
                                        Style="{DynamicResource CaptionTextBlockStyle}"
                                        Text="{Binding Likes, Mode=OneTime}" />
                                    <TextBlock Style="{DynamicResource CaptionTextBlockStyle}" Text=" Likes" />
                                </StackPanel>
                            </StackPanel>
                        </Grid>
                    </DataTemplate>
                </ui:ListView.ItemTemplate>
            </ui:ListView>

        </local:ControlExample>
    </ui:SimpleStackPanel>
</local:ItemsPageBase>
